<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Book Appointment - Mufti Sahab</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        /* --- VARIABLES --- */
        :root {
            --royal-blue: #002366; 
            --royal-light: #e6e9f0;
            --text-dark: #1A1A1A;
            --input-bg: #F3F4F6;
            --danger-red: #8B0000;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; -webkit-tap-highlight-color: transparent; }

        body {
            background: #eef2f3;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
        }

        /* --- DYNAMIC BACKGROUND --- */
        .bg-curves { position: absolute; width: 100%; height: 100%; z-index: 0; overflow: hidden; background: #fff; }
        .blob { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.6; animation: float 12s infinite alternate ease-in-out; }
        .blob-1 { top: -10%; left: -20%; width: 500px; height: 500px; background: #dae2f8; }
        .blob-2 { bottom: -10%; right: -20%; width: 450px; height: 450px; background: #d6a4a4; animation-delay: -3s; }
        @keyframes float { 0% { transform: translate(0,0); } 100% { transform: translate(40px, 50px); } }

        /* --- MAIN CARD --- */
        .mobile-card {
            position: relative;
            width: 100%; max-width: 420px; height: 100%; max-height: 900px;
            background: rgba(255, 255, 255, 0.92);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            z-index: 10; display: flex; flex-direction: column;
            opacity: 0; /* Hidden initially for GSAP */
        }
        @media (min-width: 500px) { .mobile-card { height: 92vh; border-radius: 45px; border: 6px solid #fff; box-shadow: 0 20px 50px rgba(0,0,0,0.15); } }

        /* Content Area */
        .content { padding: 40px 24px 100px 24px; overflow-y: auto; scrollbar-width: none; }
        .content::-webkit-scrollbar { display: none; }

        h1 { font-family: 'Playfair Display', serif; font-size: 28px; color: var(--royal-blue); margin-bottom: 15px; text-align: center; }

        /* WARNING BOX */
        .strict-warning {
            background: rgba(139, 0, 0, 0.08); border-left: 4px solid var(--danger-red);
            padding: 12px; border-radius: 8px; margin-bottom: 20px; font-size: 11px; color: var(--danger-red); line-height: 1.4;
            display: flex; gap: 8px; align-items: center;
        }

        /* --- MIDDLE IMAGE (UPDATED: CIRCLE & BORDER) --- */
        .middle-img-container {
            width: 100%; display: flex; justify-content: center; margin-bottom: 25px;
        }
        .middle-img {
            width: 130px; height: 130px; 
            object-fit: cover; /* Ensures image fills the circle perfectly */
            border-radius: 50%; /* Circle Shape */
            border: 4px solid white; /* Clean White Border */
            background: #f0f0f0; /* Light background behind PNG */
            box-shadow: 0 10px 20px rgba(0,0,0,0.15); /* Shadow */
            /* Initial state for animation */
            transform: scale(0); opacity: 0; 
        }

        /* INPUTS */
        .input-group { margin-bottom: 15px; }
        .custom-input {
            width: 100%; padding: 14px; background: var(--input-bg); border: 1px solid transparent;
            border-radius: 12px; font-size: 14px; outline: none; transition: 0.3s;
        }
        .custom-input:focus { background: #fff; border-color: var(--royal-blue); box-shadow: 0 4px 15px rgba(0,35,102,0.1); }

        /* DATE SCROLL */
        .scroll-container {
            display: flex; gap: 10px; overflow-x: auto; padding: 5px; margin: 0 -5px 15px -5px; scrollbar-width: none;
        }
        .scroll-container::-webkit-scrollbar { display: none; }
        .date-card {
            flex: 0 0 auto; min-width: 60px; height: 75px; border-radius: 16px; background: #fff; border: 1px solid #eee;
            display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer;
        }
        .date-card.active { background: var(--royal-blue); color: white; border-color: var(--royal-blue); transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,35,102,0.2); }
        .date-card.active span { color: white; }

        /* NAMAZ TABS */
        .namaz-tabs {
            display: flex; gap: 8px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 15px; scrollbar-width: none;
        }
        .namaz-tabs::-webkit-scrollbar { display: none; }
        .namaz-tab {
            padding: 10px 18px; background: #fff; border: 1px solid #ddd; border-radius: 20px;
            font-size: 13px; font-weight: 500; white-space: nowrap; cursor: pointer; color: #555; transition: 0.2s;
        }
        .namaz-tab.active { background: var(--royal-blue); color: white; border-color: var(--royal-blue); }

        /* TIME SLOTS (DYNAMIC) */
        .time-slots-area {
            display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 30px;
            opacity: 0; transform: translateY(10px); transition: all 0.3s ease; display: none; /* Hidden by default */
        }
        .time-slots-area.show { display: grid; opacity: 1; transform: translateY(0); }
        
        .time-pill {
            padding: 10px; background: #fff; border: 1px solid #eee; border-radius: 10px;
            font-size: 12px; text-align: center; cursor: pointer; color: #333;
        }
        .time-pill.active { background: var(--royal-blue); color: white; font-weight: 600; box-shadow: 0 4px 10px rgba(0,35,102,0.2); }

        /* BUTTON */
        .bottom-bar { position: absolute; bottom: 25px; left: 24px; right: 24px; z-index: 20; opacity: 0; }
        .book-btn {
            width: 100%; padding: 18px; border-radius: 16px; background: var(--royal-blue); color: white;
            font-size: 16px; font-weight: 600; border: none; box-shadow: 0 10px 25px rgba(0, 35, 102, 0.3);
            cursor: pointer; display: flex; justify-content: center; gap: 10px; transition: transform 0.1s;
        }
        .book-btn:active { transform: scale(0.97); }

        .section-label { font-size: 12px; font-weight: 600; color: #666; margin-bottom: 8px; display: block; }

        /* Animation Classes */
        .reveal { opacity: 0; transform: translateY(30px); }

    </style>
</head>
<body>

    <div class="bg-curves">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
    </div>

    <div class="mobile-card">
        <div class="content">
            <h1 class="reveal">Book Appointment</h1>

            <div class="strict-warning reveal">
                <i class="ph-fill ph-warning-circle" style="font-size: 20px;"></i>
                <span>Sirf zaruri (Urgent) kaam ke liye hi book karein. Strict action applicable.</span>
            </div>

            <div class="middle-img-container">
                <img src="mufti.png" alt="Profile" class="middle-img">
            </div>

            <div class="input-group reveal">
                <input type="text" id="userName" class="custom-input" placeholder="Your Name">
            </div>
            <div class="input-group reveal">
                <input type="text" id="userReason" class="custom-input" placeholder="Reason (Wajah)">
            </div>

            <div class="reveal">
                <label class="section-label">Select Date</label>
                <div class="scroll-container" id="dateContainer"></div>
            </div>

            <div class="reveal">
                <label class="section-label">Select Prayer Time</label>
                <div class="namaz-tabs">
                    <div class="namaz-tab" onclick="loadTimes(this, 'Fajr')">Fajr</div>
                    <div class="namaz-tab" onclick="loadTimes(this, 'Zohar')">Zohar</div>
                    <div class="namaz-tab" onclick="loadTimes(this, 'Asr')">Asr</div>
                    <div class="namaz-tab" onclick="loadTimes(this, 'Maghrib')">Maghrib</div>
                    <div class="namaz-tab" onclick="loadTimes(this, 'Isha')">Isha</div>
                </div>

                <div class="time-slots-area" id="timeSlotContainer">
                    </div>
            </div>

        </div>

        <div class="bottom-bar">
            <button class="book-btn" onclick="sendToWhatsApp()">
                Book Now <i class="ph-bold ph-whatsapp-logo"></i>
            </button>
        </div>
    </div>

    <script>
        // --- DATA & LOGIC ---
        const prayerTimes = {
            'Fajr': ['06:00 AM', '06:30 AM', '07:00 AM'], 
            'Zohar': ['02:00 PM', '02:30 PM', '03:00 PM'], 
            'Asr': ['05:00 PM', '05:30 PM'],              
            'Maghrib': ['06:45 PM', '07:15 PM'],          
            'Isha': ['09:00 PM', '09:30 PM', '10:00 PM']  
        };

        let selectedDate = null;
        let selectedNamaz = null;
        let selectedExactTime = null;

        // --- 1. LOAD DATES ---
        const dateContainer = document.getElementById('dateContainer');
        const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

        for (let i = 0; i < 60; i++) {
            const date = new Date();
            date.setDate(date.getDate() + i);
            const dName = days[date.getDay()];
            const dNum = date.getDate();
            const fullDate = `${dNum} ${months[date.getMonth()]} ${date.getFullYear()}`;

            const card = document.createElement('div');
            card.className = 'date-card';
            card.innerHTML = `<span style="font-size:18px; font-weight:700;">${dNum}</span><span style="font-size:10px; color:#888;">${dName}</span>`;
            
            card.onclick = function() {
                if(navigator.vibrate) navigator.vibrate(30);
                document.querySelectorAll('.date-card').forEach(c => c.classList.remove('active'));
                card.classList.add('active');
                card.querySelector('span:last-child').style.color = 'white'; 
                selectedDate = `${dName}, ${fullDate}`;
            };
            dateContainer.appendChild(card);
        }

        // --- 2. LOAD TIMES ---
        function loadTimes(tab, namaz) {
            if(navigator.vibrate) navigator.vibrate(30);

            document.querySelectorAll('.namaz-tab').forEach(t => t.classList.remove('active'));
            tab.classList.add('active');

            selectedNamaz = namaz;
            selectedExactTime = null; 

            const container = document.getElementById('timeSlotContainer');
            container.innerHTML = ''; 
            container.classList.add('show');

            const times = prayerTimes[namaz];
            times.forEach(time => {
                const pill = document.createElement('div');
                pill.className = 'time-pill';
                pill.innerText = time;
                pill.onclick = function() {
                    if(navigator.vibrate) navigator.vibrate(30);
                    document.querySelectorAll('.time-pill').forEach(p => p.classList.remove('active'));
                    pill.classList.add('active');
                    selectedExactTime = time;
                };
                container.appendChild(pill);
            });
        }

        // --- 3. WHATSAPP SEND ---
        function sendToWhatsApp() {
            if(navigator.vibrate) navigator.vibrate(60);

            const name = document.getElementById('userName').value.trim();
            const reason = document.getElementById('userReason').value.trim();

            if (!name || !reason || !selectedDate || !selectedNamaz || !selectedExactTime) {
                alert("Please select Name, Reason, Date, Prayer & Time Slot.");
                return;
            }

            const msg = `*New Appointment Request* ðŸ•Œ%0a%0aðŸ‘¤ *Name:* ${name}%0aðŸ“ *Reason:* ${reason}%0aðŸ“… *Date:* ${selectedDate}%0aðŸ•Œ *Prayer:* ${selectedNamaz}%0aâ° *Time:* ${selectedExactTime}`;
            
            window.open(`https://wa.me/919827855877?text=${msg}`, '_blank');
        }

        // --- 4. ADVANCED GSAP ANIMATIONS ---
        window.onload = () => {
            const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

            // 1. Card Fades In & Slides Up
            tl.to(".mobile-card", { 
                y: 0, 
                opacity: 1, 
                duration: 1 
            })
            // 2. Image Pops (Scale Up with Bounce)
            .to(".middle-img", { 
                scale: 1, 
                opacity: 1, 
                duration: 0.8, 
                ease: "back.out(1.7)" 
            }, "-=0.5") 
            // 3. Staggered Entrance for Content
            .to(".reveal", { 
                y: 0, 
                opacity: 1, 
                duration: 0.8, 
                stagger: 0.1 
            }, "-=0.6")
            // 4. Button Slides Up Last
            .fromTo(".bottom-bar", 
                { y: 20, opacity: 0 },
                { y: 0, opacity: 1, duration: 0.8 },
                "-=0.4"
            );
        };

    </script>
</body>
</html>
